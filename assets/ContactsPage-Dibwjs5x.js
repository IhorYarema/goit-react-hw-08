import{a as N,u as _,j as t,V as x,c as I,d as V,b as i,e as W,f as Y,h as G}from"./index-CY_TCueN.js";const H="_form_15kz5_1",J="_input_15kz5_27",K="_button_15kz5_48",w={form:H,input:J,button:K};function Q(){const e=N(),n=_(l=>l.contacts.items),s=async l=>{l.preventDefault();const o=l.target,a=o.elements.name.value.trim(),c=o.elements.number.value.trim();if(n.find(r=>r.name.toLowerCase()===a.toLowerCase())){x.error(`${a} is already in your phonebook.`);return}try{await e(I({name:a,number:c})).unwrap(),x.success("Contact added successfully!"),o.reset()}catch{x.error("Failed to add contact. Please try again.")}};return t.jsxs("form",{onSubmit:s,className:w.form,children:[t.jsx("input",{className:w.input,type:"text",name:"name",placeholder:"Name",required:!0}),t.jsx("input",{className:w.input,type:"tel",name:"number",placeholder:"Number",required:!0}),t.jsx("button",{className:w.button,type:"submit",children:"Add contact"})]})}const U="_container_14qt3_1",X="_label_14qt3_25",Z="_input_14qt3_31",k={container:U,label:X,input:Z};function tt(){const e=N(),n=_(s=>s.filters.name);return t.jsxs("div",{className:k.container,children:[t.jsx("label",{className:k.label,htmlFor:"name",children:"Find contacts by name"}),t.jsx("input",{className:k.input,type:"text",placeholder:"Enter name",value:n,onChange:s=>e(V(s.target.value))})]})}const et="_form_lqewf_2",nt="_input_lqewf_13",rt="_buttons_lqewf_22",st="_saveBtn_lqewf_28",ct="_cancelBtn_lqewf_43",h={form:et,input:nt,buttons:rt,saveBtn:st,cancelBtn:ct};function at({contact:e,onClose:n}){const s=N(),[l,o]=i.useState(e.name),[a,c]=i.useState(e.number),r=u=>{if(u.preventDefault(),!l.trim()||!a.trim()){x.error("Please fill all fields");return}s(W({id:e.id,name:l,number:a})).unwrap().then(()=>{x.success("Contact updated"),n()}).catch(()=>x.error("Failed to update contact"))};return t.jsxs("form",{onSubmit:r,className:h.form,children:[t.jsx("input",{className:h.input,value:l,onChange:u=>o(u.target.value),placeholder:"Name",required:!0}),t.jsx("input",{className:h.input,value:a,onChange:u=>c(u.target.value),placeholder:"Number",required:!0}),t.jsxs("div",{className:h.buttons,children:[t.jsx("button",{type:"submit",className:h.saveBtn,children:"Save"}),t.jsx("button",{type:"button",className:h.cancelBtn,onClick:n,children:"Cancel"})]})]})}const ot="_container_fi97l_2",it="_text_container_fi97l_15",lt="_text_fi97l_15",ut="_actions_fi97l_28",mt="_btn_fi97l_33",dt="_editBtn_fi97l_34",ft="_modalOverlay_fi97l_68",_t="_modal_fi97l_68",ht="_modalButtons_fi97l_97",xt="_confirmBtn_fi97l_105",pt="_cancelBtn_fi97l_106",f={container:ot,text_container:it,text:lt,actions:ut,btn:mt,editBtn:dt,modalOverlay:ft,modal:_t,modalButtons:ht,confirmBtn:xt,cancelBtn:pt};function bt({contact:e}){const n=N(),[s,l]=i.useState(!1),[o,a]=i.useState(!1),c=()=>{n(Y(e.id)),l(!1)};return t.jsxs("div",{className:f.container,children:[o?t.jsx(at,{contact:e,onClose:()=>a(!1)}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:f.text_container,children:[t.jsx("p",{className:f.text,children:e.name}),t.jsx("p",{className:f.text,children:e.number})]}),t.jsxs("div",{className:f.actions,children:[t.jsx("button",{className:f.editBtn,onClick:()=>a(!0),children:"Edit"}),t.jsx("button",{className:f.btn,onClick:()=>l(!0),children:"Delete"})]})]}),s&&t.jsx("div",{className:f.modalOverlay,children:t.jsxs("div",{className:f.modal,children:[t.jsxs("p",{children:["Are you sure you want to delete ",t.jsx("b",{children:e.name}),"?"]}),t.jsxs("div",{className:f.modalButtons,children:[t.jsx("button",{className:f.confirmBtn,onClick:c,children:"Yes, delete"}),t.jsx("button",{className:f.cancelBtn,onClick:()=>l(!1),children:"Cancel"})]})]})})]})}const vt="_list_1dqci_1",jt="_item_1dqci_23",M={list:vt,item:jt};function Nt(e,n,s){var l=this,o=i.useRef(null),a=i.useRef(0),c=i.useRef(null),r=i.useRef([]),u=i.useRef(),p=i.useRef(),L=i.useRef(e),b=i.useRef(!0);L.current=e;var F=typeof window<"u",y=!n&&n!==0&&F;if(typeof e!="function")throw new TypeError("Expected a function");n=+n||0;var R=!!(s=s||{}).leading,$=!("trailing"in s)||!!s.trailing,v="maxWait"in s,D="debounceOnServer"in s&&!!s.debounceOnServer,S=v?Math.max(+s.maxWait||0,n):null;i.useEffect(function(){return b.current=!0,function(){b.current=!1}},[]);var z=i.useMemo(function(){var q=function(m){var d=r.current,B=u.current;return r.current=u.current=null,a.current=m,p.current=L.current.apply(B,d)},C=function(m,d){y&&cancelAnimationFrame(c.current),c.current=y?requestAnimationFrame(m):setTimeout(m,d)},A=function(m){if(!b.current)return!1;var d=m-o.current;return!o.current||d>=n||d<0||v&&m-a.current>=S},O=function(m){return c.current=null,$&&r.current?q(m):(r.current=u.current=null,p.current)},E=function m(){var d=Date.now();if(A(d))return O(d);if(b.current){var B=n-(d-o.current),P=v?Math.min(B,S-(d-a.current)):B;C(m,P)}},g=function(){if(F||D){var m=Date.now(),d=A(m);if(r.current=[].slice.call(arguments),u.current=l,o.current=m,d){if(!c.current&&b.current)return a.current=o.current,C(E,n),R?q(o.current):p.current;if(v)return C(E,n),q(o.current)}return c.current||C(E,n),p.current}};return g.cancel=function(){c.current&&(y?cancelAnimationFrame(c.current):clearTimeout(c.current)),a.current=0,r.current=o.current=u.current=c.current=null},g.isPending=function(){return!!c.current},g.flush=function(){return c.current?O(Date.now()):p.current},g},[R,v,n,S,$,y,F,D]);return z}function yt(e,n){return e===n}function Ct(e,n,s){var l=yt,o=i.useRef(e),a=i.useState({})[1],c=Nt(i.useCallback(function(u){o.current=u,a({})},[a]),n,s),r=i.useRef(e);return l(r.current,e)||(c(e),r.current=e),[o.current,c]}const gt=e=>e.contacts.items,T=e=>e.contacts.isLoading,Bt=e=>e.contacts.error,wt=e=>e.filters.name;function Ft(){const e=_(wt),[n]=Ct(e,500),s=_(gt),l=_(T),o=_(Bt),a=r=>r.toLowerCase().replace(/[\s\-()]/g,""),c=s==null?void 0:s.filter(r=>{const u=a(n||"");return a((r==null?void 0:r.name)||"").includes(u)||a((r==null?void 0:r.number)||"").includes(u)});return t.jsxs("ul",{className:M.list,children:[l&&t.jsx("p",{children:"Loading..."}),o&&t.jsxs("p",{children:["Error: ",o]}),c==null?void 0:c.map(r=>t.jsx("li",{className:M.item,children:t.jsx(bt,{contact:r})},r.id))]})}const St="_title_13nib_1",qt="_loading_13nib_23",Et="_myContactForm_13nib_42",kt="_mySearchBox_13nib_55",Lt="_myContactList_13nib_68",j={title:St,loading:qt,myContactForm:Et,mySearchBox:kt,myContactList:Lt};function $t(){const e=N(),n=_(T);return i.useEffect(()=>{e(G())},[e]),t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:j.title,children:"Your phonebook"}),t.jsx("div",{className:j.loading,children:n&&"Request in progress..."}),t.jsx(Q,{className:j.myContactForm}),t.jsx(tt,{className:j.mySearchBox}),t.jsx(Ft,{className:j.myContactList})]})}export{$t as default};
//# sourceMappingURL=ContactsPage-Dibwjs5x.js.map
